import{r as a,j as r}from"./app-DOLQPbwd.js";import{L as z,f as J,c as U}from"./format-JD0DOADu.js";import{A as $}from"./AuthenticatedLayout-DK8qIrYw.js";import{p as F}from"./parseMySqlDate-BxfSYstQ.js";import"./ApplicationLogo-x3tpT1Vm.js";import"./ResponsiveNavLink-CR2OZagr.js";import"./transition-E94I35Ll.js";import"./NavLink-DjfeBNA8.js";/* empty css                     */function H({title:o,titleId:i,...l},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),o?a.createElement("title",{id:i},o):null,a.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const O=a.forwardRef(H);function I({title:o,titleId:i,...l},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))}const P=a.forwardRef(I);function Z({title:o,titleId:i,...l},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Q=a.forwardRef(Z);function V({title:o,titleId:i,...l},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const X=a.forwardRef(V);function q({children:o,className:i="",data:l=null,loadData:d=()=>Promise.resolve(),onFiltersUpdate:j=()=>Promise.resolve(),schema:u={},options:{filters:c={},sorting:x=!1,toggleShow:f={}}={},uniqueKey:y="id"}){const[e,n]=a.useState(l??[]),[p,N]=a.useState({}),[E,g]=a.useState(null),[k,A]=a.useState([]),[v,w]=a.useState(null);a.useEffect(()=>{l===null&&(g(!0),d().then(t=>n(t??[])).finally(()=>g(!1)))},[]),a.useEffect(()=>{const t={};Object.keys(p).forEach(s=>{t[c[s].key]=p[s]}),g(!0),j(t).then(s=>n(s)).finally(()=>g(!1))},[p]);const _=t=>{const s=t.currentTarget.name,m=t.currentTarget.value;A(b=>{const h=JSON.parse(JSON.stringify(b));return m?h.push(s):h.splice(h.indexOf(s),1),h})},C=t=>{w(v===t?null:t)},L=t=>{const s=t.currentTarget.name,m=t.currentTarget.value;N(b=>{const h=JSON.parse(JSON.stringify(b));return m?h[s]=m:delete h[s],h}),w(null)},T=t=>{if(t===v)return t===v&&r.jsxs("select",{onChange:L,name:t,children:[r.jsx("option",{value:"",children:"(all)"}),Object.keys(c[t].options).sort((s,m)=>c[t].options[s]>c[t].options[m]).map(s=>r.jsx("option",{value:s,children:c[t].options[s]},s))]})};function R(t){return!k.includes(t)&&!p[t]&&u[t]&&r.jsxs("th",{className:t.replaceAll(" ",""),children:[r.jsxs("div",{className:"cell-container",children:[r.jsxs("div",{className:"action-container",children:[x&&r.jsx("button",{className:"sorting",onClick:s=>void 0,children:r.jsx(P,{})}),f.includes(t)&&r.jsx("button",{className:"hide",name:t,value:"1",onClick:_,children:r.jsx(Q,{})}),(c==null?void 0:c[t])&&r.jsx("button",{className:"filter",onClick:s=>C(t),children:r.jsx(X,{})})]}),r.jsx("span",{className:"heading-container",children:t})]}),v&&T(t)]},t)}function W(t){switch(typeof o){case"function":return t.map((s,m)=>o(s,m));default:return t.map((s,m)=>{const b=typeof u[y]=="function"?u[y](s,m):s[y];return r.jsx("tr",{children:Object.keys(u).map(h=>M(h,s,m))},b)})}}const M=(t,s,m)=>{if(!(p[t]||k.includes(t)))switch(typeof u[t]){case"function":return r.jsx("td",{children:u[t](s,m)},t);default:return r.jsx("td",{children:s[u[t]]},t)}},D=()=>r.jsxs("div",{className:"filters",children:[Object.keys(c).map(t=>p[t]&&r.jsxs("label",{children:[r.jsxs("span",{children:[t,":",r.jsx("wbr",{})," ",c[t].options[p[t]]]}),r.jsx("button",{className:"text-sm",name:t,value:"",onClick:L,children:r.jsx(O,{})})]},t)),k.map(t=>r.jsxs("label",{children:[r.jsxs("span",{children:[t,":",r.jsx("wbr",{})," (hidden)"]}),r.jsx("button",{className:"text-sm",name:t,value:"",onClick:_,children:r.jsx(O,{})})]},t))]});function B(){if(!(e!=null&&e.length))return r.jsx("tr",{children:r.jsx("td",{colSpan:"100%",className:"no-data",children:"(no data)"})})}function Y(t){}return r.jsxs("div",{className:`DataTableWithOperations ${i}`,children:[r.jsxs("table",{children:[r.jsxs("thead",{children:[r.jsx("tr",{className:"caption",children:r.jsx("th",{colSpan:Object.keys(u).length,children:D()})}),r.jsx("tr",{children:Object.keys(u).map(t=>R(t))})]}),r.jsx("tbody",{children:W(e)}),r.jsx("tfoot",{children:B()})]}),E?r.jsx("div",{className:"spinner-backdrop",children:r.jsx("div",{className:"spinner-wrapper",children:r.jsx(z,{})})}):null]})}function S(o){return J(o,U.displayDayMonthFormat)}const G=({message:o,children:i})=>r.jsxs("button",{className:"Tooltip",children:[i,r.jsx("div",{className:"message",children:o})]});function le({fishLimits:o,locations:i,fishCategories:l,fishes:d,boundaries:j,watersCategories:u,tidalCategories:c,waters:x,fishingMethods:f}){const y=e=>axios.post(route("fishLimits.data"),{filters:e}).then(n=>n.data.fishLimits).catch(n=>{console.error("Error:",n.response?n.response.data:n.message)});return r.jsx($,{children:r.jsx("div",{className:"FishLimits",children:r.jsx("div",{className:"box",children:r.jsx(q,{className:"sticky-headers",data:o,loadData:y,onFiltersUpdate:y,uniqueKey:"id",schema:{ID:e=>e.id,Location:e=>{var n;return((n=i[e.location_id])==null?void 0:n.name)??"(all)"},"Fish Category":e=>{var n;return((n=l[e.fish_category_id])==null?void 0:n.name)??"(all)"},Fish:e=>{var n;return((n=d[e.fish_id])==null?void 0:n.name)??"(all)"},Boundary:e=>{var n;return((n=j[e.boundary_id])==null?void 0:n.name)??"(all)"},"Waters Category":e=>{var n;return((n=u[e.waters_category_id])==null?void 0:n.name)??"(all)"},Tidal:e=>{var n;return((n=c[e.tidal_category_id])==null?void 0:n.name)??"(all)"},Waterbody:e=>{var n;return((n=x[e.water_id])==null?void 0:n.name)??"(all)"},"Water Stretch":e=>e.water_description,"Fishing Method":e=>{var n;return((n=f[e.fishing_method_id])==null?void 0:n.name)??"(all)"},Note:e=>e.note,Limit:e=>e.note?r.jsxs(G,{message:e.note,children:[e.bag_limit??"Unlimited","*"]}):e.bag_limit??"Unlimited","Min Size":e=>e.minimum_size??"N/A","Max Size":e=>e.maximum_size??"N/A","Season Start":e=>S(F(e.season_start)),"Sesason End":e=>S(F(e.season_end))},options:{toggleShow:["Water Stretch","Note"],filters:{Location:{key:"location_id",options:Object.keys(i).reduce((e,n)=>(e[i[n].id]=i[n].name,e),{})},"Fish Category":{key:"fish_category_id",options:Object.keys(l).reduce((e,n)=>(e[l[n].id]=l[n].name,e),{})},Fish:{key:"fish_id",options:Object.keys(d).reduce((e,n)=>(e[d[n].id]=d[n].name,e),{})},Boundary:{key:"boundary_id",options:Object.keys(j).reduce((e,n)=>(e[j[n].id]=j[n].name,e),{})},"Waters Category":{key:"waters_category_id",options:Object.keys(u).reduce((e,n)=>(e[u[n].id]=u[n].name,e),{})},Tidal:{key:"tidal_id",options:Object.keys(c).reduce((e,n)=>(e[c[n].id]=c[n].name,e),{})},Waterbody:{key:"water_id",options:Object.keys(x).reduce((e,n)=>(e[x[n].id]=x[n].name,e),{})},"Fishing Method":{key:"fishing_method_id",options:Object.keys(f).reduce((e,n)=>(e[f[n].id]=f[n].name,e),{})}}}})})})})}export{le as default};
