import{r as a,j as r}from"./app-C7CMKy6u.js";/* empty css                                */import{L as U,f as $,c as H}from"./format-CI9Xab1_.js";import{A as I}from"./AuthenticatedLayout-Ch98OSTr.js";import{p as N}from"./parseMySqlDate-C9Y-iq6S.js";import{T as O}from"./Tooltip-DCrgq9Go.js";import"./ApplicationLogo-CaatxFs8.js";import"./ResponsiveNavLink-BYDBCorK.js";import"./transition-4-kb_Fu1.js";import"./NavLink-DSjds0mz.js";/* empty css                     *//* empty css                */function P({title:o,titleId:i,...d},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},d),o?a.createElement("title",{id:i},o):null,a.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const R=a.forwardRef(P);function Z({title:o,titleId:i,...d},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},d),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))}const Q=a.forwardRef(Z);function V({title:o,titleId:i,...d},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},d),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const X=a.forwardRef(V);function q({title:o,titleId:i,...d},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},d),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const G=a.forwardRef(q);function Y({children:o,forwardRef:i,className:d="",data:l=null,loadData:p=()=>Promise.resolve(),onFiltersUpdate:j=()=>Promise.resolve(),schema:u={},options:{filters:c={},sorting:f=!1,toggleShow:x={}}={},uniqueKey:y="id"}){const[b,e]=a.useState(l??[]),[t,v]=a.useState({}),[k,w]=a.useState(null),[F,C]=a.useState([]),[_,L]=a.useState(null);a.useEffect(()=>{l===null&&(w(!0),p().then(n=>e(n??[])).finally(()=>w(!1)))},[]),a.useEffect(()=>{const n={};Object.keys(t).forEach(s=>{n[c[s].key]=t[s]}),w(!0),j(n).then(s=>e(s)).finally(()=>w(!1))},[t]);const S=n=>{const s=n.currentTarget.name,h=n.currentTarget.value;C(g=>{const m=JSON.parse(JSON.stringify(g));return h?m.push(s):m.splice(m.indexOf(s),1),m})},M=n=>{L(_===n?null:n)},E=n=>{const s=n.currentTarget.name,h=n.currentTarget.value;v(g=>{const m=JSON.parse(JSON.stringify(g));return h?m[s]=h:delete m[s],m}),L(null)},T=n=>{if(n===_)return n===_&&r.jsxs("select",{onChange:E,name:n,children:[r.jsx("option",{value:"",children:"(all)"}),Object.keys(c[n].options).sort((s,h)=>c[n].options[s]>c[n].options[h]).map(s=>r.jsx("option",{value:s,children:c[n].options[s]},s))]})};function W(n){return!F.includes(n)&&!t[n]&&u[n]&&r.jsxs("th",{className:n.replaceAll(" ",""),children:[r.jsxs("div",{className:"cell-container",children:[r.jsxs("div",{className:"action-container",children:[f&&r.jsx("button",{className:"sorting",onClick:s=>void 0,children:r.jsx(Q,{})}),x.includes(n)&&r.jsx("button",{className:"hide",name:n,value:"1",onClick:S,children:r.jsx(X,{})}),(c==null?void 0:c[n])&&r.jsx("button",{className:"filter",onClick:s=>M(n),children:r.jsx(G,{})})]}),r.jsx("span",{className:"heading-container",children:n})]}),_&&T(n)]},n)}function D(n){switch(typeof o){case"function":return n.map((s,h)=>o(s,h));default:return n.map((s,h)=>{const g=typeof u[y]=="function"?u[y](s,h):s[y];return r.jsx("tr",{children:Object.keys(u).map(m=>B(m,s,h))},g)})}}const B=(n,s,h)=>{if(!(t[n]||F.includes(n)))switch(typeof u[n]){case"function":return r.jsx("td",{children:u[n](s,h)},n);default:return r.jsx("td",{children:s[u[n]]},n)}},z=()=>r.jsxs("div",{className:"filters",children:[Object.keys(c).map(n=>t[n]&&r.jsxs("label",{children:[r.jsxs("span",{children:[n,":",r.jsx("wbr",{})," ",c[n].options[t[n]]]}),r.jsx("button",{className:"text-sm",name:n,value:"",onClick:E,children:r.jsx(R,{})})]},n)),F.map(n=>r.jsxs("label",{children:[r.jsxs("span",{children:[n,":",r.jsx("wbr",{})," (hidden)"]}),r.jsx("button",{className:"text-sm",name:n,value:"",onClick:S,children:r.jsx(R,{})})]},n))]});function J(){if(!(b!=null&&b.length))return r.jsx("tr",{children:r.jsx("td",{colSpan:"100%",className:"no-data",children:"(no data)"})})}function K(n){}return r.jsxs("div",{ref:i,className:`DataTableWithOperations ${d}`,children:[r.jsxs("table",{children:[r.jsxs("thead",{children:[r.jsx("tr",{className:"caption",children:r.jsx("th",{colSpan:Object.keys(u).length,children:z()})}),r.jsx("tr",{children:Object.keys(u).map(n=>W(n))})]}),r.jsx("tbody",{children:D(b)}),r.jsx("tfoot",{children:J()})]}),k?r.jsx("div",{className:"spinner-backdrop",children:r.jsx("div",{className:"spinner-wrapper",children:r.jsx(U,{})})}):null]})}function A(o){return $(o,H.displayDayMonthFormat)}function he({fishLimits:o,locations:i,fishCategories:d,fishes:l,boundaries:p,watersCategories:j,tidalCategories:u,waters:c,fishingMethods:f}){const x=a.useRef(null),y=e=>axios.post(route("fishLimits.data"),{filters:e}).then(t=>t.data.fishLimits).catch(t=>{console.error("Error:",t.response?t.response.data:t.message)}),b=e=>{var k;const t="May only be angled by artificial fly or baited barbless hook with a single point",v=((k=f[e.fishing_method_id])==null?void 0:k.name)??"(all)";return v===t?r.jsx(O,{message:t,containerRef:x,children:"Fly Fishing"}):v};return r.jsx(I,{children:r.jsx("div",{className:"FishLimits",children:r.jsx("div",{className:"box",children:r.jsx(Y,{forwardRef:x,className:"sticky-headers",data:o,loadData:y,onFiltersUpdate:y,uniqueKey:"id",schema:{ID:e=>e.id,Location:e=>{var t;return((t=i[e.location_id])==null?void 0:t.name)??"(all)"},"Fish Category":e=>{var t;return((t=d[e.fish_category_id])==null?void 0:t.name)??"(all)"},Fish:e=>{var t;return((t=l[e.fish_id])==null?void 0:t.name)??"(all)"},Boundary:e=>{var t;return((t=p[e.boundary_id])==null?void 0:t.name)??"(all)"},"Waters Category":e=>{var t;return((t=j[e.waters_category_id])==null?void 0:t.name)??"(all)"},Tidal:e=>{var t;return((t=u[e.tidal_category_id])==null?void 0:t.name)??"(all)"},Waterbody:e=>{var t;return((t=c[e.water_id])==null?void 0:t.name)??"(all)"},"Water Stretch":e=>e.water_description?r.jsx(O,{message:e.water_description,containerRef:x,children:" * "}):null,"Fishing Method":b,Note:e=>e.note,Limit:e=>e.note?r.jsxs(O,{message:e.note,containerRef:x,children:[e.bag_limit??"Unlimited","*"]}):e.bag_limit??"Unlimited","Min Size":e=>e.minimum_size??"N/A","Max Size":e=>e.maximum_size??"N/A","Season Start":e=>A(N(e.season_start)),"Sesason End":e=>A(N(e.season_end))},options:{toggleShow:["Water Stretch","Note"],filters:{Location:{key:"location_id",options:Object.keys(i).reduce((e,t)=>(e[i[t].id]=i[t].name,e),{})},"Fish Category":{key:"fish_category_id",options:Object.keys(d).reduce((e,t)=>(e[d[t].id]=d[t].name,e),{})},Fish:{key:"fish_id",options:Object.keys(l).reduce((e,t)=>(e[l[t].id]=l[t].name,e),{})},Boundary:{key:"boundary_id",options:Object.keys(p).reduce((e,t)=>(e[p[t].id]=p[t].name,e),{})},"Waters Category":{key:"waters_category_id",options:Object.keys(j).reduce((e,t)=>(e[j[t].id]=j[t].name,e),{})},Tidal:{key:"tidal_id",options:Object.keys(u).reduce((e,t)=>(e[u[t].id]=u[t].name,e),{})},Waterbody:{key:"water_id",options:Object.keys(c).reduce((e,t)=>(e[c[t].id]=c[t].name,e),{})},"Fishing Method":{key:"fishing_method_id",options:Object.keys(f).reduce((e,t)=>(e[f[t].id]=f[t].name,e),{})}}}})})})})}export{he as default};
