import{r as a,j as r,Y as B}from"./app-DGWc41VG.js";import{L as z,f as H,c as I}from"./format-CYilSwNn.js";import{A as J}from"./AuthenticatedLayout-DFmed4BW.js";import{p as L}from"./parseMySqlDate-E8S_Axq_.js";import"./ApplicationLogo-D7xW_3mr.js";import"./ResponsiveNavLink-C52wYrth.js";import"./transition-BQHH-BwJ.js";import"./NavLink-Uv3Z-1t0.js";/* empty css                     */function U({title:o,titleId:i,...c},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},c),o?a.createElement("title",{id:i},o):null,a.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const F=a.forwardRef(U);function P({title:o,titleId:i,...c},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},c),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))}const $=a.forwardRef(P);function Z({title:o,titleId:i,...c},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},c),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Q=a.forwardRef(Z);function V({title:o,titleId:i,...c},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},c),o?a.createElement("title",{id:i},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const X=a.forwardRef(V);function Y({children:o,data:i=null,loadData:c=()=>Promise.resolve(),onFiltersUpdate:d=()=>Promise.resolve(),schema:u={},options:{filters:l={},sorting:x=!1,toggleShow:f={}}={},uniqueKey:p="id"}){const[j,e]=a.useState(i??[]),[t,S]=a.useState({}),[E,b]=a.useState(null),[g,N]=a.useState([]),[v,k]=a.useState(null);a.useEffect(()=>{i===null&&(b(!0),c().then(n=>e(n??[])).finally(()=>b(!1)))},[]),a.useEffect(()=>{const n={};Object.keys(t).forEach(s=>{n[l[s].key]=t[s]}),b(!0),d(n).then(s=>e(s)).finally(()=>b(!1))},[t]);const w=n=>{const s=n.currentTarget.name,m=n.currentTarget.value;N(y=>{const h=JSON.parse(JSON.stringify(y));return m?h.push(s):h.splice(h.indexOf(s),1),h})},A=n=>{k(v===n?null:n)},_=n=>{const s=n.currentTarget.name,m=n.currentTarget.value;S(y=>{const h=JSON.parse(JSON.stringify(y));return m?h[s]=m:delete h[s],h}),k(null)},C=n=>{if(n===v)return n===v&&r.jsxs("select",{onChange:_,name:n,children:[r.jsx("option",{value:"",children:"(all)"}),Object.keys(l[n].options).sort((s,m)=>l[n].options[s]>l[n].options[m]).map(s=>r.jsx("option",{value:s,children:l[n].options[s]},s))]})};function T(n){return!g.includes(n)&&!t[n]&&u[n]&&r.jsxs("th",{className:n.replaceAll(" ",""),children:[r.jsxs("div",{className:"cell-container",children:[r.jsxs("div",{className:"action-container",children:[x&&r.jsx("button",{className:"sorting",onClick:s=>void 0,children:r.jsx($,{})}),f.includes(n)&&r.jsx("button",{className:"hide",name:n,value:"1",onClick:w,children:r.jsx(Q,{})}),(l==null?void 0:l[n])&&r.jsx("button",{className:"filter",onClick:s=>A(n),children:r.jsx(X,{})})]}),r.jsx("span",{children:n})]}),v&&C(n)]},n)}function R(n){switch(typeof o){case"function":return n.map((s,m)=>o(s,m));default:return n.map((s,m)=>{const y=typeof u[p]=="function"?u[p](s,m):s[p];return r.jsx("tr",{children:Object.keys(u).map(h=>W(h,s,m))},y)})}}const W=(n,s,m)=>{if(!(t[n]||g.includes(n)))switch(typeof u[n]){case"function":return r.jsx("td",{children:u[n](s,m)},n);default:return r.jsx("td",{children:s[u[n]]},n)}},M=()=>r.jsxs("div",{className:"filters",children:[Object.keys(l).map(n=>t[n]&&r.jsxs("label",{children:[r.jsxs("span",{children:[n,":",r.jsx("wbr",{})," ",l[n].options[t[n]]]}),r.jsx("button",{className:"text-sm",name:n,value:"",onClick:_,children:r.jsx(F,{})})]},n)),g.map(n=>r.jsxs("label",{children:[r.jsxs("span",{children:[n,":",r.jsx("wbr",{})," (hidden)"]}),r.jsx("button",{className:"text-sm",name:n,value:"",onClick:w,children:r.jsx(F,{})})]},n))]});function D(){if(E)return r.jsx("tr",{children:r.jsx("td",{colSpan:"100%",className:"loading",children:r.jsx("div",{className:"spinner-backdrop",children:r.jsx("div",{className:"spinner-wrapper",children:r.jsx(z,{})})})})});if(!(j!=null&&j.length))return r.jsx("tr",{children:r.jsx("td",{colSpan:"100%",className:"no-data",children:"(no data)"})})}function G(n){}return r.jsxs("table",{className:"DataTableWithOperations",children:[(!!Object.keys(t).length||!!g.length)&&r.jsx("caption",{children:M()}),r.jsx("thead",{children:r.jsx("tr",{children:Object.keys(u).map(n=>T(n))})}),r.jsx("tbody",{children:R(j)}),r.jsx("tfoot",{children:D()})]})}function O(o){return H(o,I.displayDayMonthFormat)}const q=({message:o,children:i})=>r.jsxs("button",{className:"Tooltip",children:[i,r.jsx("div",{className:"message",children:o})]});function le({fishLimits:o,locations:i,fishCategories:c,fishes:d,boundaries:u,watersCategories:l,tidalCategories:x,waters:f,fishingMethods:p}){const j=e=>axios.post(route("fishLimits.data"),{filters:e}).then(t=>t.data.fishLimits).catch(t=>{console.error("Error:",t.response?t.response.data:t.message)});return r.jsxs(J,{header:null,children:[r.jsx(B,{title:"Project: FISH - Fishing Limits"}),r.jsx("div",{className:"FishLimits",children:r.jsx("div",{className:"box",children:r.jsx(Y,{data:o,loadData:j,onFiltersUpdate:j,uniqueKey:"id",schema:{ID:e=>e.id,Location:e=>{var t;return((t=i[e.location_id])==null?void 0:t.name)??"(all)"},"Fish Category":e=>{var t;return((t=c[e.fish_category_id])==null?void 0:t.name)??"(all)"},Fish:e=>{var t;return((t=d[e.fish_id])==null?void 0:t.name)??"(all)"},Boundary:e=>{var t;return((t=u[e.boundary_id])==null?void 0:t.name)??"(all)"},"Waters Category":e=>{var t;return((t=l[e.waters_category_id])==null?void 0:t.name)??"(all)"},Tidal:e=>{var t;return((t=x[e.tidal_category_id])==null?void 0:t.name)??"(all)"},Waterbody:e=>{var t;return((t=f[e.water_id])==null?void 0:t.name)??"(all)"},"Water Stretch":e=>e.water_description,"Fishing Method":e=>{var t;return((t=p[e.fishing_method_id])==null?void 0:t.name)??"(all)"},Note:e=>e.note,Limit:e=>e.note?r.jsxs(q,{message:e.note,children:[e.bag_limit??"Unlimited","*"]}):e.bag_limit??"Unlimited","Min Size":e=>e.minimum_size??"N/A","Max Size":e=>e.maximum_size??"N/A","Season Start":e=>O(L(e.season_start)),"Sesason End":e=>O(L(e.season_end))},options:{toggleShow:["Water Stretch","Note"],filters:{Location:{key:"location_id",options:Object.keys(i).reduce((e,t)=>(e[i[t].id]=i[t].name,e),{})},"Fish Category":{key:"fish_category_id",options:Object.keys(c).reduce((e,t)=>(e[c[t].id]=c[t].name,e),{})},Fish:{key:"fish_id",options:Object.keys(d).reduce((e,t)=>(e[d[t].id]=d[t].name,e),{})},Boundary:{key:"boundary_id",options:Object.keys(u).reduce((e,t)=>(e[u[t].id]=u[t].name,e),{})},"Waters Category":{key:"waters_category_id",options:Object.keys(l).reduce((e,t)=>(e[l[t].id]=l[t].name,e),{})},Tidal:{key:"tidal_id",options:Object.keys(x).reduce((e,t)=>(e[x[t].id]=x[t].name,e),{})},Waterbody:{key:"water_id",options:Object.keys(f).reduce((e,t)=>(e[f[t].id]=f[t].name,e),{})},"Fishing Method":{key:"fishing_method_id",options:Object.keys(p).reduce((e,t)=>(e[p[t].id]=p[t].name,e),{})}}}})})})]})}export{le as default};
