import{r as o,j as a}from"./app-CpkJJ9s6.js";import{useInternalRouting as R,InternalLink as p}from"./InternalRouter-C6L3_LtF.js";import{p as i}from"./NewBrunswickMap-CXhqyvOM.js";import{N as v,F as N,a as x}from"./NewBrunswickMapMobile-01dx1bGm.js";import"./HomeIcon-VE8V8Egm.js";function E({locations:j}){const m=R(),b=o.useRef(null),l=o.useRef(null),[n,h]=o.useState(null),c=o.useRef(n);o.useEffect(()=>{c.current=n},[n]);const e=j.reduce((t,r)=>(t[r.name]=r,t),{}),u=t=>{const r=i[t];return e[r]};function g(t){d(null,"")}const d=(t,r)=>{if((c==null?void 0:c.current)===r){const s=u(r);m.setView("location",{id:s.id,breadCrumb:{position:1,label:s.name}}),m.updateBreadCrumb(1,{name:"location",params:{id:s.id},content:s.name})}l.current.querySelectorAll(".highlighted").forEach(s=>s.classList.remove("highlighted")),r?(l.current.classList.add("selected"),l.current.querySelector(`[data-path-id=${r}]`).classList.add("highlighted"),h(r)):(l.current.classList.remove("selected"),h(null))};return a.jsx("div",{className:`MapMobile portrait ${n?"selected-location":""}`,children:a.jsxs("div",{className:"container",children:[a.jsx(v,{containerRef:b,onTouchLocation:d}),a.jsxs("div",{className:"locations",ref:l,children:[a.jsx("button",{className:"close",onClick:g,children:a.jsx(N,{})}),a.jsx("ul",{children:Object.keys(i).map(t=>{var r,s;return a.jsx("li",{"data-path-id":t,children:a.jsxs(p,{name:"location",onClick:L=>{var f;if(!((f=e==null?void 0:e[i[t]])!=null&&f.hasData))return L.preventDefault(),!1},params:{id:u(t).id},breadCrumb:{position:1,label:e==null?void 0:e[i[t]].name},children:[a.jsx("h3",{children:i[t]}),a.jsxs("em",{children:[!((r=e==null?void 0:e[i[t]])!=null&&r.hasData)&&a.jsx("strong",{children:"(no data)"}),(s=e==null?void 0:e[i[t]])==null?void 0:s.description]})]})},t)})}),n&&a.jsx(p,{className:"go",name:"location",params:{id:u(n).id},breadCrumb:{position:1,label:e==null?void 0:e[i[n]].name},children:e!=null&&e[i[n]].hasData?a.jsx(x,{}):null})]})]})})}export{E as default};
