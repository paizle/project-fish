import{R as l,j as s}from"./app-BI2LXh0O.js";import{InternalLink as T}from"./InternalRouter-BndX3xuG.js";import{p as h,N as g}from"./NewBrunswickMap-D0995kyF.js";const R=(m=300,d=10)=>{const[a,c]=l.useState(null),u=l.useRef(a);l.useEffect(()=>{u.current=a},[a]);const[r,t]=l.useState(null),f=l.useRef(r);return l.useEffect(()=>{f.current=r},[r]),{onTouchStart:e=>i=>{const n=i.touches[0];c({time:Date.now(),x:n.clientX,y:n.clientY}),t({x:n.clientX,y:n.clientY}),console.log("start")},onTouchMove:e=>i=>{const n=i.touches[0];t({x:n.clientX,y:n.clientY}),console.log("move")},onTouchEnd:e=>i=>{console.log({callback:e});const n=u.current,S=f.current;if(console.log("end"),n){const L=Date.now()-n.time,j=Math.abs(n.x-S.x),x=Math.abs(n.y-S.y);L<=m&&j<=d&&x<=d&&e(i)}c(null),t(null)}}};function E({containerRef:m=null,onTouchLocation:d}){const a=m||l.createRef(null),c=R();return l.useEffect(()=>{if(a.current){const u=a.current.querySelector("svg");Object.keys(h).forEach(r=>{const t=u.querySelector("#"+r);t.classList.add("location"),d&&(t.addEventListener("touchstart",c.onTouchStart(()=>null)),t.addEventListener("touchmove",c.onTouchMove(()=>null)),t.addEventListener("touchend",c.onTouchEnd(f=>{Object.keys(h).forEach(v=>{u.querySelector("#"+v).classList.remove("active")}),u.querySelector("#"+r).classList.add("active"),d(f,r)})))})}},[a.current]),s.jsx(g,{containerRef:a})}function N({locations:m,isPortrait:d}){const a=l.useRef(null),c=l.useRef(null),[u,r]=l.useState(!1),t=m.reduce((o,e)=>(o[e.name]=e,o),{}),f=o=>{const e=h[o];return t[e]};function v(o){p(null,"")}function p(o,e){console.log("test"),c.current.querySelectorAll(".highlighted").forEach(i=>i.classList.remove("highlighted")),e?(c.current.classList.add("selected"),c.current.querySelector(`[data-path-id=${e}]`).classList.add("highlighted"),r(!0)):(c.current.classList.remove("selected"),r(!1))}return s.jsx("div",{className:`MapMobile portrait ${u?"selected-location":null}`,children:s.jsxs("div",{className:"container",children:[s.jsx(E,{containerRef:a,onTouchLocation:p}),s.jsxs("div",{className:"locations",ref:c,children:[s.jsx("button",{className:"close",onClick:v,children:"X"}),s.jsx("ul",{children:Object.keys(h).map(o=>{var e;return s.jsx("li",{"data-path-id":o,children:s.jsxs(T,{name:"location",params:{id:f(o).id},breadCrumb:{position:1,label:t==null?void 0:t[h[o]].name},children:[s.jsx("h3",{children:h[o]}),s.jsx("em",{children:(e=t==null?void 0:t[h[o]])==null?void 0:e.description})]})},o)})})]})]})})}export{N as default};
