import{r as i,R as _,j as s}from"./app-GsjunD-S.js";import{useInternalRouting as O}from"./InternalRouter-Bapk6yFT.js";import{t as j,f as g,L as B,c as p}from"./format-DydbFBTm.js";import{p as u}from"./parseMySqlDate-CS0HqXnd.js";import{T as C}from"./Tooltip-CiKyfWh5.js";import"./HomeIcon-DydJbLpr.js";/* empty css                */function w(l,o){const m=+j(l)-+j(o);return m<0?-1:m>0?1:m}function E(l,o){return+j(l)<+j(o)}function T({title:l,titleId:o,...m},f){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":o},m),l?i.createElement("title",{id:o},l):null,i.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"}))}const W=i.forwardRef(T);function Z({title:l,titleId:o,...m},f){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":o},m),l?i.createElement("title",{id:o},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const A=i.forwardRef(Z);function G({children:l,id:o,route:m,...f}){const[N,b]=i.useState([]),[R,S]=i.useState(!1);_.useEffect(()=>{S(!0),axios.get(m(o,"")).then(e=>{b(e.data.limits??[])}).finally(()=>S(!1))},[]);const F=O();_.useEffect(()=>{F.setLoading(!1)},[]);const x=L(N);function L(e){if(!e.length)return;const t=e.reduce((n,a)=>{var c;const r=((c=a==null?void 0:a.fish)==null?void 0:c.name)??null;if(!n[r]){const d={season:null,limits:[]};n[r]=d}return n[r].limits.push(a),n},{});return Object.keys(t).forEach(n=>{t[n].limits=t[n].limits.sort((r,c)=>{const d=w(u(r.season_start),u(c.season_start));return d===0?w(u(r.season_end),u(c.season_end)):d});const a=t[n].limits.reduce((r,c)=>{if(!r.seasonStart)r.seasonStart=u(c.season_start);else{const d=u(c.season_start);E(d,r.seasonStart)&&(r.seasonStart=d)}if(!r.seasonEnd)r.seasonEnd=u(c.season_end);else{const d=u(c.season_end);E(d,r.seasonEnd)||(r.seasonEnd=d)}return r},{seasonStart:null,seasonEnd:null});t[n].season=g(a.seasonStart,p.displayDayMonthShortFormat)+" - "+g(a.seasonEnd,p.displayDayMonthShortFormat)}),t}const[h,M]=i.useState({}),D=e=>{if(console.log(e),e.defaultPrevented){debugger;return}const t=e.currentTarget.value;M(n=>{const a=JSON.parse(JSON.stringify(n));return a[t]=!(a!=null&&a[t]),a})},k=e=>s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:[g(u(e.season_start),p.displayDayMonthShortFormat)," "]}),s.jsxs("span",{children:["-"," ",g(u(e.season_end),p.displayDayMonthShortFormat)]})]}),v=(e,t=!1)=>{let n="";return(t||!e.water_description)&&(e.fishing_method&&(e.fishing_method.name==="May only be angled by artificial fly or baited barbless hook with a single point"?n="Fly Fishing":n=e.fishing_method.name),e.tidal_category&&(n&&(n+=" in "),n+=e.tidal_category.name+" waters")),n},$=e=>{const t=v(e,!0);return e.water_description?s.jsxs("div",{className:"water-description",children:[t?t+" ":e.water.name+" ",e.water_description]}):null},y=e=>e??"N/A",z=e=>e===null?s.jsx("span",{className:"text-lg leading-4",children:"âˆž"}):e;return s.jsx("div",{className:"Water",children:s.jsxs("div",{className:"fish-grid",children:[s.jsxs("div",{className:"header",children:[s.jsx("div",{className:"column-header date-range",children:"Season/Restrictions"}),s.jsx("div",{className:"column-header",children:"Bag Limit"}),s.jsx("div",{className:"column-header",children:"Min. Size"}),s.jsx("div",{className:"column-header",children:"Max. Size"})]}),s.jsx("div",{className:"body",children:R?s.jsx("div",{className:"loading-spinner-container",children:s.jsx(B,{})}):Object.keys(x??{}).map((e,t)=>s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:D,value:e,className:`fish-name ${t%2===0?"even":"odd"} ${h!=null&&h[e]?"open":""}`,children:[s.jsxs("div",{className:"fish-season",children:[s.jsxs("strong",{children:[s.jsx(W,{className:"open-indicator"}),e]}),s.jsxs("em",{children:["(",`${x[e].season}`,")"]})]}),s.jsx("div",{className:"flex",children:x[e].limits.length>1?s.jsx(C,{message:"Some Restrictions",children:s.jsx(A,{className:"alert"})}):null})]}),s.jsx("div",{className:`limits ${t%2===0?"even":"odd"} ${h!=null&&h[e]?"open":""}`,children:x[e].limits.map(n=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"season-exception",children:[s.jsx("div",{className:"date-span",children:k(n)}),s.jsx("div",{className:"exception",children:v(n)})]}),s.jsx("div",{children:z(n.bag_limit)}),s.jsx("div",{children:y(n.minimum_size)}),s.jsx("div",{children:y(n.maximum_size)}),$(n)]}))})]}))})]})})}export{G as default};
